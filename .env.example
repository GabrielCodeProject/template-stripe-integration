# Environment Configuration Template for Stripe Payment Template
# Copy this file to .env.local for development or configure environment variables in production

# =================================================================
# APPLICATION CONFIGURATION
# =================================================================
NODE_ENV=development
APP_VERSION=1.0.0
PORT=3000
HOSTNAME=localhost

# =================================================================
# DATABASE CONFIGURATION
# =================================================================
# PostgreSQL Connection String for Prisma ORM
# Format: postgresql://username:password@host:port/database?schema=public
DATABASE_URL=postgresql://postgres:your_secure_password@localhost:5432/stripe_template_dev?schema=public

# Direct database connection for migrations and schema changes
# Used by Prisma for migrations and introspection
DIRECT_URL=postgresql://postgres:your_secure_password@localhost:5432/stripe_template_dev?schema=public

# Database SSL configuration (set to true for production)
DATABASE_SSL=false

# Database credentials (used by Docker Compose)
POSTGRES_DB=stripe_template_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password
POSTGRES_PORT=5432

# =================================================================
# REDIS CONFIGURATION
# =================================================================
# Redis Connection String for caching and sessions
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_secure_redis_password
REDIS_PORT=6379

# =================================================================
# AUTHENTICATION CONFIGURATION (BetterAuth)
# =================================================================
# BetterAuth Secret - MUST be changed in production
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-super-secret-betterauth-key-change-this-in-production

# BetterAuth URL - Base URL for authentication callbacks
BETTER_AUTH_URL=http://localhost:3000

# Trust host for authentication (set to true in production with reverse proxy)
AUTH_TRUST_HOST=false

# Legacy NextAuth compatibility (for migration purposes)
NEXTAUTH_SECRET=your-super-secret-key-change-this-in-production
NEXTAUTH_URL=http://localhost:3000

# =================================================================
# STRIPE CONFIGURATION
# =================================================================
# Stripe Secret Key (server-side) - Test key for development
# Use live key (sk_live_...) in production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe Publishable Key (client-side) - Test key for development
# Use live key (pk_live_...) in production
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# Stripe Webhook Secret for endpoint verification
# Get this from your Stripe Dashboard > Webhooks > Endpoint
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe API Version (recommended to pin for consistency)
# Current stable version: 2024-06-20
STRIPE_API_VERSION=2024-06-20

# Stripe Configuration for Canadian market
STRIPE_CURRENCY=cad
STRIPE_COUNTRY=CA

# =================================================================
# APPLICATION URLS
# =================================================================
# Public URL of your application
NEXT_PUBLIC_APP_URL=http://localhost:3000

# API Base URL (usually same as APP_URL)
NEXT_PUBLIC_API_URL=http://localhost:3000/api

# =================================================================
# EMAIL CONFIGURATION
# =================================================================
# SMTP Configuration for transactional emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Default sender email address
FROM_EMAIL=noreply@yourapp.com
SMTP_FROM_NAME="Your App Name"

# Legacy compatibility
SMTP_FROM=noreply@yourapp.com

# =================================================================
# FILE STORAGE CONFIGURATION
# =================================================================
# Local file storage path
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760  # 10MB in bytes

# AWS S3 Configuration (optional)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
S3_BUCKET_NAME=your-app-uploads

# =================================================================
# MONITORING AND LOGGING
# =================================================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Sentry Configuration (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# Google Analytics (optional)
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# =================================================================
# SECURITY CONFIGURATION
# =================================================================
# Content Security Policy reporting endpoint
# Set up an endpoint to receive CSP violation reports
CSP_REPORT_URI=https://yourapp.com/api/csp-report

# Rate limiting secret for securing rate limit endpoints
# Generate with: openssl rand -base64 32
RATE_LIMIT_SECRET=your-rate-limit-secret-key

# Data encryption key for sensitive data at rest
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=your-encryption-key-for-sensitive-data

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://yourapp.com

# Rate limiting configuration
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Session configuration
SESSION_TIMEOUT=24h
SESSION_SECURE=false  # Set to true in production with HTTPS

# =================================================================
# CANADIAN COMPLIANCE CONFIGURATION
# =================================================================
# Default currency setting for Canadian market
DEFAULT_CURRENCY=CAD

# Tax calculation mode for Canadian compliance
# Options: "automatic", "manual", "stripe_tax"
TAX_CALCULATION_MODE=automatic

# Default business province for tax calculations
# Valid values: AB, BC, MB, NB, NL, NT, NS, NU, ON, PE, QC, SK, YT
BUSINESS_PROVINCE=ON

# Tax Configuration
TAX_ENABLED=true
GST_RATE=0.05
HST_PROVINCES=ON,NB,NL,NS,PE
HST_RATE=0.13
PST_BC_RATE=0.07
PST_SK_RATE=0.06
PST_MB_RATE=0.07
PST_QC_RATE=0.09975  # QST rate

# Privacy Configuration
PRIVACY_POLICY_URL=https://yourapp.com/privacy
TERMS_OF_SERVICE_URL=https://yourapp.com/terms
COOKIE_CONSENT_ENABLED=true

# =================================================================
# FEATURE FLAGS
# =================================================================
# Enable/disable features
FEATURE_SUBSCRIPTIONS=true
FEATURE_ONE_TIME_PAYMENTS=true
FEATURE_ADMIN_DASHBOARD=true
FEATURE_ANALYTICS=true
FEATURE_REFUNDS=true
FEATURE_PROMO_CODES=true

# =================================================================
# THIRD-PARTY INTEGRATIONS
# =================================================================
# Slack Webhook for notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord Webhook for notifications (optional)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# =================================================================
# DEVELOPMENT CONFIGURATION
# =================================================================
# Enable debug mode
DEBUG=false

# Skip email sending in development
SKIP_EMAIL_SENDING=true

# Mock Stripe payments in development
MOCK_STRIPE_PAYMENTS=false

# Enable hot reloading
NEXT_TELEMETRY_DISABLED=1

# =================================================================
# PRODUCTION OVERRIDES
# =================================================================
# The following variables MUST be overridden in production:

# Application Configuration
# - NODE_ENV=production
# - NEXT_PUBLIC_APP_URL=<your-production-domain>
# - NEXT_PUBLIC_API_URL=<your-production-domain>/api

# Database Configuration
# - DATABASE_URL=<production-database-url-with-ssl>
# - DIRECT_URL=<production-database-direct-url>
# - DATABASE_SSL=true

# Authentication
# - BETTER_AUTH_SECRET=<strong-random-secret-32-chars>
# - BETTER_AUTH_URL=<your-production-domain>
# - AUTH_TRUST_HOST=true
# - NEXTAUTH_SECRET=<strong-random-secret-32-chars>
# - NEXTAUTH_URL=<your-production-domain>

# Stripe Configuration (LIVE KEYS)
# - STRIPE_SECRET_KEY=sk_live_<your-live-secret-key>
# - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_<your-live-publishable-key>
# - STRIPE_WEBHOOK_SECRET=whsec_<your-live-webhook-secret>

# Security
# - CSP_REPORT_URI=<your-production-domain>/api/csp-report
# - RATE_LIMIT_SECRET=<strong-random-secret>
# - ENCRYPTION_KEY=<strong-random-encryption-key>
# - SESSION_SECURE=true

# Infrastructure
# - REDIS_URL=<production-redis-url-with-auth>
# - SMTP_HOST=<production-smtp-host>
# - FROM_EMAIL=<your-production-email>

# Monitoring
# - LOG_LEVEL=warn
# - SENTRY_ENVIRONMENT=production
# - DEBUG=false
# - SKIP_EMAIL_SENDING=false